require 'json'
require_relative 'rally-tools.rb'

blob = %q!
[ { "attributes": { "address": "arn:aws:sns:us-east-1:519409131842:onramp-workflow-uat-progress-notifications", "name": "OR_Ready_for_TMD", "type": "SNS" }, "id": 5, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/5" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "arn:aws:sns:us-west-2:119951901457:Test-test-WorkflowStatus", "name": "SNS_test", "type": "SNS" }, "id": 7, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/7" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Josh_Derby@discovery.com", "name": "Josh Derby Email", "type": "Email" }, "id": 10, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/10" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "jeff.beachy@sdvi.com", "name": "Jeff Beachy Email", "type": "Email" }, "id": 11, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/11" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "jeff.beachy@sdvi.com", "name": "QC Job Error", "type": "Email" }, "id": 15, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/15" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "abraham_yoslov@discovery.com", "name": "Abe Yoslov", "type": "Email" }, "id": 43, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/43" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "john_schmidt@discovery.com", "name": "John Schmidt", "type": "Email" }, "id": 44, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/44" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "MTPO_Eng@discovery.com", "name": "MTPO Engineering", "type": "Email" }, "id": 21, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/21" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "DKNOX Engineering", "type": "Email" }, "id": 40, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/40" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "DKNOX Notification", "type": "Email" }, "id": 39, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/39" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "SDVI_Notification_DCTC_UAT@Discovery.com", "name": "OWN Notification", "type": "Email" }, "id": 22, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/22" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "DKNOX Notification File Arrive", "type": "Email" }, "id": 41, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/41" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "DKNOX Notification File Fail", "type": "Email" }, "id": 42, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/42" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Adetola_Adewodu@discovery.com", "name": "Adetola Adewodu", "type": "Email" }, "id": 23, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/23" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "brian.pelletier@sdvi.com", "name": "Brian Pelletier Email", "type": "Email" }, "id": 24, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/24" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "Vinay Khulbe", "type": "Email" }, "id": 26, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/26" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "arn:aws:sns:us-east-1:160092099172:commercial-catch-topic", "name": "test", "type": "SNS All" }, "id": 45, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/45" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "DCTC Notification", "type": "Email" }, "id": 12, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/12" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": null, "name": "Test", "type": "UI Alarm" }, "id": 27, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/27" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "MIAMI Notification", "type": "Email" }, "id": 29, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/29" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "UK Notification", "type": "Email" }, "id": 28, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/28" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "ITALY Notification", "type": "Email" }, "id": 30, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/30" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "GERMANY Notification", "type": "Email" }, "id": 31, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/31" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "SG_MediaLogistics@discovery.com", "name": "DNAP Notification", "type": "Email" }, "id": 32, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/32" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "neil_kempin@discovery.com", "name": "Unmatched Woos Notification", "type": "Email" }, "id": 33, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/33" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "Silver Spring Engineering", "type": "Email" }, "id": 34, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/34" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "rick@sdvi.com", "name": "Rick Stallkamp email", "type": "Email" }, "id": 35, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/35" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "Vinay_Khulbe@discovery.com", "name": "London Engineering", "type": "Email" }, "id": 36, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/36" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "arn:aws:sns:eu-west-1:519409131842:onramp-workflow-uat-medianet-notifications", "name": "OR_From_MediaNet", "type": "SNS Recv" }, "id": 14, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/14" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "arn:aws:sns:us-east-1:519409131842:onramp-workflow-uat-mediaflex-notifications", "name": "OR_From_TMD", "type": "SNS Recv" }, "id": 13, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/13" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "arn:aws:sns:us-east-1:519409131842:onramp-uat-progress-notifications-knox", "name": "DKNOX_Send", "type": "SNS" }, "id": 37, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/37" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" }, { "attributes": { "address": "arn:aws:sns:us-east-1:519409131842:onramp-uat-knox-notifications", "name": "DKNOX_Receive", "type": "SNS Recv" }, "id": 38, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/notificationPresets/38" }, "relationships": { "organization": { "data": { "id": "1", "type": "organizations" }, "links": { "self": "https://discovery-uat.sdvi.com/api/v2/organizations/1" } } }, "type": "notificationPresets" } ]
!

has = JSON.parse blob
has.each do |data|
  post_data = data["attributes"]
  payload = {
    "data" => {
      "attributes" => post_data,
      "type": "notificationPresets",
    }
  }
  begin
    RallyTools.make_api_request("/notificationPresets", :DEV, payload: payload)
  rescue RuntimeError
    p "already uploaded..."
  end
end
